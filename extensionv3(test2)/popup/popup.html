<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; object-src 'self'">
  <title>Toxic Language Detector</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- Skip link for accessibility -->
  <a href="#main-content" class="skip-link">Chuy·ªÉn ƒë·∫øn n·ªôi dung</a>
  
  <div class="container">
    <div class="header">
      <img src="../icons/iris_scan.png" alt="Logo" class="logo">
      <h1>Toxic Language Detector</h1>
    </div>
    
    <div class="toggle-container">
      <label class="switch" for="enable-toggle">
        <input type="checkbox" id="enable-toggle" checked>
        <span class="slider"></span>
      </label>
      <span>Enable Extension</span>
    </div>
    
    <main id="main-content">
      <div class="tabs">
        <div class="tab-header">
          <button class="tab-button active" data-tab="analyze" aria-selected="true">
            <span class="icon">üìä</span>
            Ph√¢n t√≠ch
          </button>
          <button class="tab-button requires-auth" data-tab="stats" aria-selected="false">
            <span class="icon">üìà</span>
            Th·ªëng k√™
          </button>
          <button class="tab-button requires-auth" data-tab="settings" aria-selected="false">
            <span class="icon">‚öôÔ∏è</span>
            C√†i ƒë·∫∑t
          </button>
          <button class="tab-button" data-tab="account" aria-selected="false">
            <span class="icon">üë§</span>
            T√†i kho·∫£n
          </button>
          <button class="tab-button requires-auth" data-tab="help" aria-selected="false">
            <span class="icon">‚ùì</span>
            Tr·ª£ gi√∫p
          </button>
        </div>
        
        <div class="tab-content">
          <!-- Tab 1: Analyze tab -->
          <div class="tab-pane active" id="analyze-tab" role="tabpanel" aria-labelledby="analyze-tab">
            <h2>Ph√¢n t√≠ch n·ªôi dung</h2>
            <div class="analyze-mode-switch">
              <button id="single-mode-btn" class="mode-btn active" aria-pressed="true">Ph√¢n t√≠ch 1 d√≤ng</button>
              <button id="batch-mode-btn" class="mode-btn" aria-pressed="false">Ph√¢n t√≠ch h√†ng lo·∫°t</button>
            </div>
            
            <div id="single-analyze-area">
              <div class="analyze-container">
                <div class="platform-detection">
                  <span class="label">N·ªÅn t·∫£ng:</span>
                  <span id="current-platform" class="platform">Ch∆∞a x√°c ƒë·ªãnh</span>
                </div>
                
                <div class="form-group">
                  <label for="analyze-text" class="sr-only">Nh·∫≠p vƒÉn b·∫£n c·∫ßn ph√¢n t√≠ch</label>
                  <textarea id="analyze-text" placeholder="Nh·∫≠p vƒÉn b·∫£n c·∫ßn ph√¢n t√≠ch..." aria-label="N·ªôi dung c·∫ßn ph√¢n t√≠ch"></textarea>
                </div>
                
                <div class="analyze-options">
                  <label class="checkbox">
                    <input type="checkbox" id="anonymous-mode">
                    <span class="checkmark"></span>
                    ·∫®n danh ng∆∞·ªùi g·ª≠i
                  </label>
                  
                  <div class="region-select">
                    <label for="region">V√πng mi·ªÅn:</label>
                    <select id="region" aria-label="Ch·ªçn v√πng mi·ªÅn">
                      <option value="all">To√†n qu·ªëc</option>
                      <option value="north">Mi·ªÅn B·∫Øc</option>
                      <option value="central">Mi·ªÅn Trung</option>
                      <option value="south">Mi·ªÅn Nam</option>
                    </select>
                  </div>
                </div>
                
                <button id="analyze-button" class="action-button" aria-label="Ph√¢n t√≠ch vƒÉn b·∫£n">
                  <span class="icon">üîç</span>
                  Ph√¢n t√≠ch
                </button>
                
                <div id="result-container" class="result-container hidden" aria-live="polite">
                  <h3>K·∫øt qu·∫£ ph√¢n t√≠ch:</h3>
                  
                  <div class="result-item">
                    <div class="result-label">Ph√¢n lo·∫°i:</div>
                    <div id="result-category" class="result-value"></div>
                  </div>
                  
                  <div class="result-item">
                    <div class="result-label">ƒê·ªô tin c·∫≠y:</div>
                    <div id="result-confidence" class="result-value"></div>
                  </div>
                  
                  <div class="result-progress">
                    <div class="progress-item">
                      <span>B√¨nh th∆∞·ªùng:</span>
                      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <div id="progress-clean" class="progress-fill" style="width: 0%"></div>
                      </div>
                      <span id="percent-clean">0%</span>
                    </div>
                    
                    <div class="progress-item">
                      <span>X√∫c ph·∫°m:</span>
                      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <div id="progress-offensive" class="progress-fill progress-offensive" style="width: 0%"></div>
                      </div>
                      <span id="percent-offensive">0%</span>
                    </div>
                    
                    <div class="progress-item">
                      <span>Th√π gh√©t:</span>
                      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <div id="progress-hate" class="progress-fill progress-hate" style="width: 0%"></div>
                      </div>
                      <span id="percent-hate">0%</span>
                    </div>
                    
                    <div class="progress-item">
                      <span>Spam:</span>
                      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <div id="progress-spam" class="progress-fill progress-spam" style="width: 0%"></div>
                      </div>
                      <span id="percent-spam">0%</span>
                    </div>
                  </div>
                  
                  <div class="result-advanced hidden" id="result-advanced">
                    <div class="result-item">
                      <div class="result-label">S·∫Øc th√°i:</div>
                      <div id="result-emotion"></div>
                    </div>
                    
                    <div class="result-item">
                      <div class="result-label">M·ª•c ƒë√≠ch:</div>
                      <div id="result-intent"></div>
                    </div>
                    
                    <div class="result-item">
                      <div class="result-label">T·ª´ kh√≥a:</div>
                      <div id="result-keywords" class="keywords-container"></div>
                    </div>
                  </div>
                  
                  <button id="report-button" class="btn btn-secondary btn-icon" data-tooltip="B√°o c√°o k·∫øt qu·∫£ ph√¢n t√≠ch kh√¥ng ch√≠nh x√°c">
                    <span class="icon">üö©</span>
                    B√°o c√°o ph√¢n t√≠ch sai
                  </button>
                </div>
              </div>
            </div>
            
            <div id="batch-analyze-area" style="display:none;">
              <div class="analyze-container">
                <div class="form-group">
                  <label for="batch-input" class="sr-only">Nh·∫≠p nhi·ªÅu b√¨nh lu·∫≠n ƒë·ªÉ ph√¢n t√≠ch h√†ng lo·∫°t</label>
                  <textarea id="batch-input" placeholder="Nh·∫≠p m·ªói d√≤ng m·ªôt b√¨nh lu·∫≠n..." aria-label="N·ªôi dung ph√¢n t√≠ch h√†ng lo·∫°t"></textarea>
                </div>
                
                <div class="batch-actions">
                  <button id="batch-detect-btn" class="action-button" aria-label="Ph√¢n t√≠ch t·∫•t c·∫£ b√¨nh lu·∫≠n">
                    <span class="icon">‚ö°</span>
                    Ph√¢n t√≠ch h√†ng lo·∫°t
                  </button>
                  
                  <div class="form-group">
                    <label for="batch-file-input" class="sr-only">T·∫£i l√™n file ch·ª©a b√¨nh lu·∫≠n</label>
                    <input type="file" id="batch-file-input" accept=".txt,.csv" aria-label="T·∫£i l√™n file ch·ª©a b√¨nh lu·∫≠n">
                  </div>
                </div>
                
                <div id="batch-result-container" class="result-container hidden" aria-live="polite">
                  <div class="batch-summary">
                    <h4>T·ªïng quan k·∫øt qu·∫£</h4>
                    <div class="summary-stats">
                      <div>T·ªïng s·ªë: <strong id="batch-total">0</strong></div>
                      <div>B√¨nh th∆∞·ªùng: <strong id="batch-clean-count" class="clean">0</strong></div>
                      <div>X√∫c ph·∫°m: <strong id="batch-offensive-count" class="offensive">0</strong></div>
                      <div>Th√π gh√©t: <strong id="batch-hate-count" class="hate">0</strong></div>
                      <div>Spam: <strong id="batch-spam-count" class="spam">0</strong></div>
                    </div>
                  </div>
                  
                  <div id="batch-result-list"></div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Tab 2: Settings -->
          <div class="tab-pane" id="settings-tab" role="tabpanel" aria-labelledby="settings-tab">
            <h2>C√†i ƒë·∫∑t</h2>
      
      <div class="setting-item">
              <label for="threshold">Ng∆∞·ª°ng nh·∫°y:</label>
              <input type="range" id="threshold" min="0.5" max="0.9" step="0.05" value="0.7" aria-valuemin="0.5" aria-valuemax="0.9" aria-valuenow="0.7">
        <span id="threshold-value">0.7</span>
      </div>
      
      <div class="setting-item">
        <label class="checkbox">
          <input type="checkbox" id="highlight-toxic" checked>
          <span class="checkmark"></span>
                ƒê√°nh d·∫•u n·ªôi dung ƒë·ªôc h·∫°i
        </label>
      </div>
      
            <div class="setting-item requires-auth">
              <label class="checkbox">
                <input type="checkbox" id="save-data" checked>
                <span class="checkmark"></span>
                L∆∞u data ph√¢n t√≠ch
              </label>
              <div class="setting-description">Gi√∫p c·∫£i thi·ªán m√¥ h√¨nh AI c·ªßa ch√∫ng t√¥i</div>
            </div>
            
            <h3>Hi·ªÉn th·ªã tr√™n n·ªÅn t·∫£ng:</h3>
      <div class="platforms">
        <label class="checkbox">
          <input type="checkbox" id="platform-facebook" checked>
          <span class="checkmark"></span>
          Facebook
        </label>
        
        <label class="checkbox">
          <input type="checkbox" id="platform-youtube" checked>
          <span class="checkmark"></span>
          YouTube
        </label>
        
        <label class="checkbox">
          <input type="checkbox" id="platform-twitter" checked>
          <span class="checkmark"></span>
          Twitter
        </label>
              
              <label class="checkbox">
                <input type="checkbox" id="platform-tiktok">
                <span class="checkmark"></span>
                TikTok
              </label>
            </div>
            
            <h3>T√πy ch·ªçn hi·ªÉn th·ªã:</h3>
            <div class="display-options">
              <label class="checkbox">
                <input type="checkbox" id="show-clean" checked>
                <span class="checkmark"></span>
                Hi·ªán b√¨nh th∆∞·ªùng
              </label>
              
              <label class="checkbox">
                <input type="checkbox" id="show-offensive" checked>
                <span class="checkmark"></span>
                Hi·ªán x√∫c ph·∫°m
              </label>
              
              <label class="checkbox">
                <input type="checkbox" id="show-hate" checked>
                <span class="checkmark"></span>
                Hi·ªán th√π gh√©t
              </label>
              
              <label class="checkbox">
                <input type="checkbox" id="show-spam" checked>
                <span class="checkmark"></span>
                Hi·ªán spam
              </label>
            </div>
            
            <div class="theme-switch">
              <span>Giao di·ªán:</span>
              <div class="theme-buttons">
                <button id="theme-light" class="theme-button active">S√°ng</button>
                <button id="theme-dark" class="theme-button">T·ªëi</button>
                <button id="theme-auto" class="theme-button">T·ª± ƒë·ªông</button>
              </div>
      </div>
    </div>
    
          <!-- Tab 3: Statistics -->
          <div class="tab-pane" id="stats-tab">
      <h2>Th·ªëng k√™</h2>
            
            <div class="simple-stats-info">
              <p>Th·ªëng k√™ ƒë∆°n gi·∫£n (bi·ªÉu ƒë·ªì ƒë√£ ƒë∆∞·ª£c t·∫Øt)</p>
            </div>
            
      <div class="stat-grid">
        <div class="stat-item">
                <div class="stat-value" id="tab-stat-scanned">0</div>
          <div class="stat-label">ƒê√£ qu√©t</div>
        </div>
        
        <div class="stat-item clean">
                <div class="stat-value" id="tab-stat-clean">0</div>
          <div class="stat-label">B√¨nh th∆∞·ªùng</div>
        </div>
        
        <div class="stat-item offensive">
                <div class="stat-value" id="tab-stat-offensive">0</div>
          <div class="stat-label">X√∫c ph·∫°m</div>
        </div>
        
        <div class="stat-item hate">
                <div class="stat-value" id="tab-stat-hate">0</div>
          <div class="stat-label">Th√π gh√©t</div>
        </div>
        
        <div class="stat-item spam">
                <div class="stat-value" id="tab-stat-spam">0</div>
          <div class="stat-label">Spam</div>
              </div>
            </div>
            
            <div class="reset-stats requires-auth">
              <button id="reset-stats" class="reset-btn">ƒê·∫∑t l·∫°i th·ªëng k√™</button>
            </div>
          </div>
          
          <!-- Tab 4: Account -->
          <div class="tab-pane" id="account-tab">
            <!-- Login Form - Shown when not logged in -->
            <div id="login-section" class="auth-section">
              <h2>ƒêƒÉng nh·∫≠p</h2>
              <form id="login-form" class="auth-form">
                <div class="form-group">
                  <label for="login-username">T√™n ƒëƒÉng nh·∫≠p:</label>
                  <input type="text" id="login-username" name="username" required>
                </div>
                
                <div class="form-group">
                  <label for="login-password">M·∫≠t kh·∫©u:</label>
                  <input type="password" id="login-password" name="password" required>
                </div>
                
                <div class="form-group checkbox-group">
                  <label class="checkbox">
                    <input type="checkbox" id="login-remember" name="remember_me">
                    <span class="checkmark"></span>
                    Ghi nh·ªõ ƒëƒÉng nh·∫≠p
                  </label>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="primary-button">ƒêƒÉng nh·∫≠p</button>
                  <button type="button" id="show-register" class="secondary-button">ƒêƒÉng k√Ω m·ªõi</button>
                </div>
                
                <div class="form-footer">
                  <a href="#" id="forgot-password">Qu√™n m·∫≠t kh·∫©u?</a>
                </div>
              </form>
            </div>
            
            <!-- Register Form - Hidden by default -->
            <div id="register-section" class="auth-section hidden">
              <h2>ƒêƒÉng k√Ω t√†i kho·∫£n</h2>
              <form id="register-form" class="auth-form">
                <div class="form-group">
                  <label for="register-username">T√™n ƒëƒÉng nh·∫≠p:</label>
                  <input type="text" id="register-username" name="username" required>
                </div>
                
                <div class="form-group">
                  <label for="register-email">Email:</label>
                  <input type="email" id="register-email" name="email" required>
                </div>
                
                <div class="form-group">
                  <label for="register-name">H·ªç t√™n (t√πy ch·ªçn):</label>
                  <input type="text" id="register-name" name="name">
                </div>
                
                <div class="form-group">
                  <label for="register-password">M·∫≠t kh·∫©u:</label>
                  <input type="password" id="register-password" name="password" required>
                </div>
                
                <div class="form-group">
                  <label for="register-confirm-password">X√°c nh·∫≠n m·∫≠t kh·∫©u:</label>
                  <input type="password" id="register-confirm-password" name="confirm_password" required>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="primary-button">ƒêƒÉng k√Ω</button>
                  <button type="button" id="show-login" class="secondary-button">ƒê√£ c√≥ t√†i kho·∫£n</button>
                </div>
              </form>
            </div>
            
            <!-- Reset Password Form - Hidden by default -->
            <div id="reset-password-section" class="auth-section hidden">
              <h2>Kh√¥i ph·ª•c m·∫≠t kh·∫©u</h2>
              <form id="reset-password-form" class="auth-form">
                <div class="form-group">
                  <label for="reset-email">Email:</label>
                  <input type="email" id="reset-email" name="email" required>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="primary-button">G·ª≠i y√™u c·∫ßu</button>
                  <button type="button" id="cancel-reset" class="secondary-button">Quay l·∫°i</button>
                </div>
              </form>
            </div>
            
            <!-- User Profile - Hidden until logged in -->
            <div id="profile-section" class="auth-section hidden">
              <h2>Th√¥ng tin t√†i kho·∫£n</h2>
              <div class="profile-info">
                <div class="profile-field">
                  <div class="profile-label">T√™n ƒëƒÉng nh·∫≠p:</div>
                  <div id="profile-username" class="profile-value"></div>
                </div>
                
                <div class="profile-field">
                  <div class="profile-label">Email:</div>
                  <div id="profile-email" class="profile-value"></div>
                </div>
                
                <div class="profile-field">
                  <div class="profile-label">H·ªç t√™n:</div>
                  <div id="profile-name" class="profile-value"></div>
                </div>
                
                <div class="profile-field">
                  <div class="profile-label">Vai tr√≤:</div>
                  <div id="profile-role" class="profile-value"></div>
                </div>
              </div>
              
              <div class="profile-actions">
                <button id="change-password-btn" class="secondary-button">ƒê·ªïi m·∫≠t kh·∫©u</button>
                <button id="logout-btn" class="warning-button">ƒêƒÉng xu·∫•t</button>
              </div>
            </div>
            
            <!-- Change Password Form - Hidden by default -->
            <div id="change-password-section" class="auth-section hidden">
              <h2>ƒê·ªïi m·∫≠t kh·∫©u</h2>
              <form id="change-password-form" class="auth-form">
                <div class="form-group">
                  <label for="current-password">M·∫≠t kh·∫©u hi·ªán t·∫°i:</label>
                  <input type="password" id="current-password" name="current_password" required>
                </div>
                
                <div class="form-group">
                  <label for="new-password">M·∫≠t kh·∫©u m·ªõi:</label>
                  <input type="password" id="new-password" name="new_password" required>
                </div>
                
                <div class="form-group">
                  <label for="confirm-new-password">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi:</label>
                  <input type="password" id="confirm-new-password" name="confirm_new_password" required>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="primary-button">C·∫≠p nh·∫≠t</button>
                  <button type="button" id="cancel-change-password" class="secondary-button">H·ªßy b·ªè</button>
                </div>
              </form>
            </div>
          </div>
          
          <!-- Tab 5: Help -->
          <div class="tab-pane" id="help-tab">
            <div class="help-section">
              <h2>Tr·ª£ gi√∫p</h2>
              <p>ƒê√¢y l√† trang tr·ª£ gi√∫p c·ªßa ·ª©ng d·ª•ng. N·∫øu b·∫°n c·∫ßn tr·ª£ gi√∫p, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>Toxic Language Detector v1.0.0</p>
      <p class="small">Developed for Research</p>
    </div>
    
    <!-- Notifications -->
    <div id="notification" class="notification hidden"></div>
  </div>
  
  <!-- Scripts -->
  <script src="popup.js"></script>
</body>
</html>
