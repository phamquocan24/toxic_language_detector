===================================================================
WEB DASHBOARD Káº¾T Ná»I Vá»šI BACKEND - TÃ“M Táº®T THAY Äá»”I
===================================================================

ğŸ“… Date: 2025-10-23

-------------------------------------------------------------------
ğŸ¯ Má»¤C TIÃŠU:
-------------------------------------------------------------------
Káº¿t ná»‘i Web Dashboard (Laravel/PHP) vá»›i Backend API (Python/FastAPI)
Ä‘á»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u thá»±c tá»« Comment, User, Log tables thay vÃ¬ 
Product, Brand tables cÅ©.

-------------------------------------------------------------------
âœ… ÄÃƒ THá»°C HIá»†N:
-------------------------------------------------------------------

1. DashboardController.php (webdashboard/modules/Admin/Http/Controllers/Admin/)
   âœ“ getStats() - Äá»•i tá»« Product/Brand sang Comment/User
     - totalSales â†’ totalComments (tá»« báº£ng comments)
     - totalOrders â†’ totalPlatforms (sá»‘ platforms unique)
     - totalProducts â†’ totalFeedbacks (comments Ä‘Ã£ Ä‘Æ°á»£c review)
     - totalCustomers â†’ totalUsers (tá»« báº£ng users)
   
   âœ“ getProductPrices() â†’ Äá»•i thÃ nh comment labels distribution
     - Thay vÃ¬ phÃ¢n loáº¡i sáº£n pháº©m theo giÃ¡
     - Äáº¿m comments theo prediction: Clean, Spam, Offensive, Hate
   
   âœ“ getLatestProducts() â†’ Äá»•i thÃ nh latest comments
     - Hiá»ƒn thá»‹ 5 comments má»›i nháº¥t
     - Bao gá»“m: content (50 chars), platform, prediction, confidence
   
   âœ“ getLatestBrands() â†’ Äá»•i thÃ nh latest logs
     - Hiá»ƒn thá»‹ 5 logs má»›i nháº¥t tá»« báº£ng logs
     - Bao gá»“m: action, user_id, timestamp
   
   âœ“ getLatestUsers() - Sá»­a Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch vá»›i schema má»›i
     - Äá»•i tá»« first_name/last_name sang name field
     - Äá»•i tá»« role sang role_id
     - TÃ¡ch name thÃ nh first_name + last_name Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch vá»›i JS

2. Feedbacks Module - Sá»­a namespace vÃ  view name
   âœ“ StatisticsController.php 
     - Namespace: Modules\Statistics â†’ Modules\Feedbacks
     - View: statistics::admin.index â†’ feedbacks::admin.index
   
   âœ“ StatisticsServiceProvider.php
     - Namespace: Modules\Statistics â†’ Modules\Feedbacks
     - moduleName: 'Statistics' â†’ 'Feedbacks'
     - moduleNameLower: 'statistics' â†’ 'feedbacks'
   
   âœ“ RouteServiceProvider.php
     - Namespace: Modules\Statistics â†’ Modules\Feedbacks
     - module_path('Statistics') â†’ module_path('Feedbacks')

-------------------------------------------------------------------
ğŸ”— Káº¾T Ná»I Vá»šI BACKEND API:
-------------------------------------------------------------------

Feedbacks Module Ä‘Ã£ sáºµn sÃ ng káº¿t ná»‘i vá»›i Backend Python API:
- GET /toxic/statistics (thá»‘ng kÃª tá»•ng quan)
- GET /toxic/trend (xu hÆ°á»›ng theo thá»i gian)
- GET /toxic/platforms (danh sÃ¡ch platforms)
- GET /toxic/toxic-keywords (tá»« khÃ³a Ä‘á»™c háº¡i)

API URL Ä‘Æ°á»£c cáº¥u hÃ¬nh qua:
- config/app.php: 'api_url' => env('API_URL', 'http://localhost/api')
- modules/Feedbacks/Config: env('TOXIC_API_URL', 'http://localhost:7860')

-------------------------------------------------------------------
ğŸ“Š DATABASE SCHEMA:
-------------------------------------------------------------------

ÄÃ£ tÆ°Æ¡ng thÃ­ch vá»›i schema:
âœ“ comments table: id, content, platform, prediction, confidence, user_id
âœ“ users table: id, name, email, role_id
âœ“ logs table: id, user_id, action, timestamp
âœ“ roles table: id, name

-------------------------------------------------------------------
ğŸ¨ FRONTEND (Dashboard.js):
-------------------------------------------------------------------

KhÃ´ng cáº§n thay Ä‘á»•i - JavaScript dashboard.js váº«n gá»i cÃ¹ng endpoints:
- /admin/api/dashboard/stats
- /admin/api/dashboard/product-prices (giá» tráº£ vá» comment labels)
- /admin/api/dashboard/latest-products (giá» tráº£ vá» comments)
- /admin/api/dashboard/latest-brands (giá» tráº£ vá» logs)
- /admin/api/dashboard/latest-users

Mapping data váº«n giá»¯ nguyÃªn structure Ä‘á»ƒ khÃ´ng pháº£i sá»­a JS.

-------------------------------------------------------------------
âš™ï¸ CONFIGURATION Cáº¦N THIáº¾T:
-------------------------------------------------------------------

1. File .env cáº§n thÃªm (náº¿u chÆ°a cÃ³):
   API_URL=http://localhost:7860
   TOXIC_API_URL=http://localhost:7860

2. Database connection (config/database.php):
   Äáº£m báº£o káº¿t ná»‘i Ä‘áº¿n cÃ¹ng database vá»›i backend Python
   hoáº·c sync dá»¯ liá»‡u giá»¯a 2 databases

-------------------------------------------------------------------
ğŸ”„ Äá»’NG Bá»˜ Dá»® LIá»†U:
-------------------------------------------------------------------

Backend Python (FastAPI) sáº½ ghi dá»¯ liá»‡u vÃ o:
- comments table (qua /predict/* endpoints)
- users table (qua /auth/* endpoints)
- logs table (qua cÃ¡c actions)

Web Dashboard (Laravel) sáº½ Ä‘á»c dá»¯ liá»‡u tá»« cÃ¹ng database Ä‘á»ƒ hiá»ƒn thá»‹.

-------------------------------------------------------------------
âœ¨ Káº¾T QUáº¢:
-------------------------------------------------------------------

Dashboard giá» sáº½ hiá»ƒn thá»‹:
ğŸ“Š 4 Cards:
  - Total Comments (thay vÃ¬ Total Sales)
  - Total Platforms (thay vÃ¬ Total Orders)
  - Total Feedbacks/Reviews (thay vÃ¬ Total Products)
  - Total Users

ğŸ“ˆ Chart:
  - Comment Labels Distribution (Clean, Spam, Offensive, Hate)
  - Thay vÃ¬ Product Price Categories

ğŸ“‹ Tables:
  - Latest Comments (thay vÃ¬ Latest Products)
  - Latest Logs (thay vÃ¬ Latest Brands)
  - Latest Users (váº«n giá»¯)

ğŸ” Feedbacks/Statistics Page:
  - Káº¿t ná»‘i trá»±c tiáº¿p vá»›i Backend API
  - Hiá»ƒn thá»‹ real-time statistics, trends, toxic keywords

-------------------------------------------------------------------
ğŸš€ TESTING:
-------------------------------------------------------------------

1. Start Backend API:
   cd backend
   python -m uvicorn app:app --reload --host 0.0.0.0 --port 7860

2. Start Web Dashboard:
   cd webdashboard
   php artisan serve --port=8080

3. Login vÃ  kiá»ƒm tra:
   http://localhost:8080 â†’ Dashboard
   http://localhost:8080/admin/statistics â†’ Feedbacks/Reports

-------------------------------------------------------------------
ğŸ“ NOTES:
-------------------------------------------------------------------

- KHÃ”NG táº¡o file má»›i
- KHÃ”NG thay Ä‘á»•i database migrations
- CHá»ˆ sá»­a logic trong controllers Ä‘á»ƒ Ä‘á»c tá»« tables Ä‘Ãºng
- JavaScript/CSS giá»¯ nguyÃªn, chá»‰ nháº­n data tá»« API Ä‘Ã£ Ä‘á»•i structure
- Backend API endpoints váº«n giá»¯ nguyÃªn (/toxic/*, /auth/*, /predict/*)

===================================================================
HOÃ€N THÃ€NH - Web Dashboard Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i vá»›i Backend API
===================================================================

